# Anaplan source

Description
-----------

Reads the data generated by the given Anaplan process from an Anaplan model. Data from the Anaplan model is first exported to a temporary location on Google Cloud Storage, and then read into the pipeline from there.

Credentials
If the plugin is running on a Google Cloud Dataproc cluster, the service account key does not need to be provided and can be set to ‘auto-detect’. Credentials will be automatically read from the cluster environment.
If the plugin is not running on a Dataproc cluster, the path to a service account key must be provided. The service account key can be found on the Dashboard in the Cloud Platform Console. Make sure the account key has permission to access Google Cloud Storage. The service account key file needs to be available on every node in your cluster and must be readable by all users running the job.


Anaplan Properties
----------
**Workspace ID:** The target Anaplan Workspace ID.

**Model ID:** The target Anaplan Model ID.

**Server File Name:** The name of the predefined placeholder file name in the model for this data import.

**Service Location:** The root service location of the Anaplan API.

**Auth Service Location:** The service location for the authentication.

**User Name:** The service account used for the connection.
Recommended: If the service account changes periodically, use a [macro](https://cdap.atlassian.net/wiki/spaces/DOCS/pages/1188036697/Macros+and+macro+functions).

**Password:** The password for authentication. Recommended: Use [secure macros](https://cdap.atlassian.net/wiki/spaces/DOCS/pages/1188036697/Macros+and+macro+functions#Secure-Function) for sensitive values like User passwords.


GCS & General Properties
----------
**Reference Name:** Name used to uniquely identify this source for lineage, annotating metadata, etc.

**Project ID**: Google Cloud Project ID, which uniquely identifies a project.
It can be found on the Dashboard in the Google Cloud Platform Console.

**Temporary Bucket Name:** The name of the GCS bucket serving as the buffer for the Anaplan data file export.

**Temporary file name in GCS bucket:** The name of the temporary file for the data exported from the Anaplan model.

**Format of the data to read:** Format of the data to export from the Anaplan model.
The format must be one of 'csv' and 'tsv'.

**Service Account**  - Service account key used for authorization:

* **File Path**: Path on the local file system of the service account key used for
  authorization. Can be set to 'auto-detect' when running on a Dataproc cluster.
  When running on other clusters, the file must be present on every node in the cluster.

* **JSON**: Contents of the service account JSON file.

**Schema:** Output schema. If a Path Field is set, it must be present in the schema as a string.

Data Type Mappings from Anaplan to CDAP
----------
The following table lists different Anaplan data types, as well as the
corresponding CDAP data type for each Anaplan type.

| Anaplan type   | CDAP type      |
|--------------- |----------------| 
| text           | string         |
| bool           | boolean        |
| date           | date           |
| numeric        | decimal        |
| numeric        | double         |
| numeric        | float          |
| numeric        | int            |
| numeric        | long           |
